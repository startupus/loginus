# üîç –ù–ê–ô–î–ï–ù–´ –ò –ò–°–ü–†–ê–í–õ–ï–ù–´ –ü–†–û–ë–õ–ï–ú–´

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê 1: –†–∞–∑–º–µ—Ä –≤–∏–¥–∂–µ—Ç–∞ –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è

### **–ß—Ç–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ:**
–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ - –æ—Å—Ç–∞—ë—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä.

### **–ü—Ä–∏—á–∏–Ω–∞:**
–í–∏–¥–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `postMessage` —Å `widgetId: 'moscow-weather-widget'`, –Ω–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—â–µ—Ç `widgetId: 'extension-{id}'`. ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç, –ø–æ—ç—Ç–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è.

### **–†–µ—à–µ–Ω–∏–µ:**
–£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `widgetId` –≤ `PluginWidget.tsx` - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
- `widgetId` (–∏–∑ props)
- `slug` (–∏–∑ extension)
- `manifest.name` (–∏–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞)
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–æ `slug`

**–§–∞–π–ª:** `frontend/src/components/Admin/AdminWidgets/PluginWidget.tsx`

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä - "Expression is required"

### **–ß—Ç–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ:**
–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ", –Ω–æ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫—É "Expression is required".

### **–ü—Ä–∏—á–∏–Ω–∞:**
1. **DTO –Ω–µ –∏–º–µ–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - ValidationPipe –º–æ–∂–µ—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. **–í–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –ø–ª–∞–≥–∏–Ω** - URL –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `/uploads/plugins/11/index.html` –≤–º–µ—Å—Ç–æ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞

### **–†–µ—à–µ–Ω–∏–µ:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ `CalculateDto`:
   ```typescript
   @IsString()
   @IsNotEmpty()
   expression: string;
   ```

2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
   ```typescript
   console.log('[CalculatorController] Received request:', JSON.stringify(dto));
   ```

**–§–∞–π–ª:** `backend/src/core/extensions/calculator.controller.ts`

---

## üöÄ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨:

### **–®–ê–ì 1: –û–±–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞**
**–í–ê–ñ–ù–û:** –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –ø–ª–∞–≥–∏–Ω (`plugins/11`)!

1. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –ø–ª–∞–≥–∏–Ω —á–µ—Ä–µ–∑ `/ru/admin/extensions`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ **–ù–û–í–´–ô** `calculator-advanced.zip`
3. –û–±–Ω–æ–≤–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é, –≤—ã–±—Ä–∞–≤ –Ω–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω

### **–®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥: `/ru/dashboard`
2. –í–∏–¥–∂–µ—Ç –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç—å—Å—è –ø–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
3. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ–±–Ω–æ–≤–∏—Ç–µ –≤–∏–¥–∂–µ—Ç:
   - –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–π `moscow-weather-widget.zip`

### **–®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ: `2 + 2 =`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend –ª–æ–≥–∏:
   ```powershell
   docker logs -f loginus-api-new | Select-String -Pattern "CalculatorController"
   ```
4. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `[CalculatorController] Received request: {"expression":"2 + 2"}`

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

### **–í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- ‚úÖ –ù–µ—Ç —Å–∫—Ä–æ–ª–ª–∞ –∏–ª–∏ –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –í—ã—Å–æ—Ç–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è

### **–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä:**
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ backend API
- ‚úÖ –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å expression
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### **–ï—Å–ª–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω:**
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/uploads/plugins/calculator-advanced/index.html`
   - –ù–ï `/uploads/plugins/11/index.html`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: `üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ backend: 2 + 2`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å: `POST /api/v2/calculator/calculate`
   - Request payload: `{"expression":"2 + 2"}`
   - Response: `{"success":true,"data":{"result":"4",...}}`

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´:

1. ‚úÖ `frontend/src/components/Admin/AdminWidgets/PluginWidget.tsx` - —É–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ widgetId
2. ‚úÖ `backend/src/core/extensions/calculator.controller.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–°–¢–ê–†–´–ô** –ø–ª–∞–≥–∏–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ (`plugins/11`)!

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å, –∑–∞–≥—Ä—É–∑–∏–≤ –Ω–æ–≤—ã–π `calculator-advanced.zip`.

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!** üöÄ

