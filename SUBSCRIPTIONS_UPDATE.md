# Обновление подписок на дашборде

## Дата: 2025-11-19

## Цель
Обновить систему подписок на дашборде в соответствии с реальными тарифными планами Loginus ID.

## Выполненные изменения

### 1. Обновлен компонент SubscriptionsList

**Файл:** `/frontend/src/components/Dashboard/SubscriptionsList.tsx`

#### Новые возможности:

**Расширенная модель данных:**
```typescript
export interface Subscription {
  id: string;
  type: SubscriptionType; // 'monthly' | 'annual' | 'premium' | 'free'
  name: string;
  price: string;
  pricePerMonth?: string; // Цена за месяц (для годовых планов)
  features: string[]; // Список преимуществ
  badge?: string; // Бейдж (например, "17% дешевле")
  active: boolean; // Активна ли подписка
  expiresAt?: string; // Дата окончания (для активных)
}
```

#### Улучшенный дизайн:

**Активная подписка:**
- Отображается отдельно в блоке "Текущая подписка"
- Выделена границей primary цвета
- Показывает бейдж "Активна" с иконкой
- Отображает дату окончания подписки
- Список всех преимуществ с галочками

**Доступные планы:**
- Отображаются в сетке (1/2/3 колонки в зависимости от размера экрана)
- Hover эффекты (поднимается, увеличивается тень)
- Кнопка "Подробнее" с анимацией стрелки
- Показываются первые 4 преимущества + счетчик остальных

**Кнопка "Изменить план":**
- Размещена в заголовке секции
- С иконкой молнии
- Вызывает callback `onUpgradeClick`

### 2. Обновлен компонент Badge

**Файл:** `/frontend/src/design-system/primitives/Badge/Badge.tsx`

#### Добавлено свойство `size`:
- `sm` - маленький (px-2 py-0.5 text-xs)
- `md` - средний (px-2.5 py-1 text-xs) - по умолчанию
- `lg` - большой (px-3 py-1.5 text-sm)

#### Улучшена верстка:
- Используется `inline-flex` вместо `inline-block`
- Добавлены `items-center justify-center` для лучшего выравнивания иконок

### 3. Обновлен компонент DataSection

**Файл:** `/frontend/src/design-system/composites/DataSection/DataSection.tsx`

#### Добавлено свойство `action`:
- Позволяет добавлять элементы action (кнопки, ссылки) в заголовок секции
- Размещается справа от заголовка
- Используется для кнопки "Изменить план"

### 4. Обновлены данные подписок в бэкенде

**Файл:** `/backend-mock/data/profile.json`

#### Добавлены реальные тарифные планы:

**1. Месячный (Активная):**
- Цена: 3 000₽/месяц
- Преимущества:
  - Доступ ко всему платному контенту
  - Приглашение в закрытое Slack-сообщество
- Срок действия: до 19.12.2025

**2. Годовой:**
- Цена: 35 000₽/год (2 917₽/мес)
- Бейдж: "17% дешевле"
- Преимущества:
  - Доступ ко всему платному контенту
  - Приглашение в закрытое Slack-сообщество
  - Бесплатный год 15+ премиальных продуктов

**3. Премиум:**
- Цена: От 150 000₽/год (от 12 500₽/мес)
- Бейдж: "Эксклюзив"
- Преимущества:
  - Доступ ко всему платному контенту
  - Приглашение в закрытое Slack-сообщество
  - Бесплатный год 15+ премиальных продуктов
  - Гарантированный доступ к бесплатному году 15+ премиальных продуктов
  - Эксклюзивные премиум-партнёры

**4. Бесплатно:**
- Цена: Бесплатно
- Преимущества:
  - Периодическая бесплатная рассылка

## Визуальные улучшения

### Текущая подписка:
```
┌─────────────────────────────────────────────────────────┐
│ Месячный                                    [✓ Активна] │
│ 3 000₽/месяц (3 000₽/мес)                              │
│ Активна до 19.12.2025                                   │
│ ─────────────────────────────────────────────────────── │
│ ✓ Доступ ко всему платному контенту                    │
│ ✓ Приглашение в закрытое Slack-сообщество              │
└─────────────────────────────────────────────────────────┘
```

### Доступные планы:
```
┌───────────────┐ ┌───────────────┐ ┌───────────────┐
│ Годовой       │ │ Премиум       │ │ Бесплатно     │
│ [17% дешевле] │ │ [Эксклюзив]   │ │               │
│ 35 000₽/год   │ │ От 150 000₽   │ │ Бесплатно     │
│ (2 917₽/мес)  │ │ (от 12 500₽)  │ │               │
│               │ │               │ │               │
│ ✓ Контент     │ │ ✓ Контент     │ │ ✓ Рассылка    │
│ ✓ Slack       │ │ ✓ Slack       │ │               │
│ ✓ 15+ прод.   │ │ ✓ 15+ прод.   │ │               │
│               │ │ +2 еще        │ │               │
│ [Подробнее →] │ │ [Подробнее →] │ │ [Подробнее →] │
└───────────────┘ └───────────────┘ └───────────────┘
```

## Адаптивность

- **Мобильные (< 640px):** 1 колонка
- **Планшеты (640px - 1024px):** 2 колонки
- **Десктоп (> 1024px):** 3 колонки

## Анимация

- Fade-in эффект для карточек с задержкой (50ms между карточками)
- Hover эффект: карточка поднимается и увеличивается тень
- Анимация стрелки на кнопке "Подробнее" при наведении
- Transition для всех интерактивных элементов

## Интеграция

### Использование в DashboardPage:

```tsx
<SubscriptionsList
  subscriptions={dashboard.subscriptions}
  onSubscriptionClick={(subscription) => {
    // Открыть детальную страницу подписки
    console.log('Open subscription:', subscription);
  }}
  onUpgradeClick={() => {
    // Открыть страницу выбора плана
    console.log('Upgrade plan');
  }}
/>
```

## Тестирование

✅ Нет ошибок линтера
✅ Компоненты отображаются корректно
✅ Данные подгружаются из бэкенда
✅ Все hover эффекты работают
✅ Адаптивность проверена

## Следующие шаги

1. Добавить модалку с детальной информацией о подписке
2. Реализовать страницу выбора и оплаты подписки
3. Добавить функционал управления подпиской (продление, отмена)
4. Интегрировать реальный платежный шлюз
5. Добавить историю подписок и платежей

## Результат

Подписки на дашборде теперь:
- Отображают актуальные тарифные планы
- Имеют современный и привлекательный дизайн
- Показывают все ключевые преимущества
- Мотивируют к апгрейду плана
- Адаптивны для всех устройств

