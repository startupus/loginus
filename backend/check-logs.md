# Инструкция по проверке логов для диагностики ошибки 500

## Проблема
При авторизации возвращается ошибка 500.

## Возможные причины
1. Проблема с инициализацией плагинов при старте приложения
2. Ошибка в методе `ensureMenuExists` при первом обращении
3. Проблема с циклическими зависимостями между модулями
4. Ошибка в методе `login` в AuthService

## Как проверить логи

### 1. Запустите бэкенд и посмотрите логи при старте:
```bash
cd backend
npm run start:dev
```

Ищите ошибки, связанные с:
- `PluginManager`
- `UIPermissionsService`
- `PluginsModule`
- `ensureMenuExists`

### 2. Проверьте логи при попытке авторизации:
После запуска попробуйте авторизоваться и посмотрите на ошибки в консоли.

### 3. Проверьте стек-трейс ошибки:
Ошибка должна содержать:
- Точное сообщение об ошибке
- Стек-трейс с указанием файла и строки
- Контекст, где произошла ошибка

## Что было исправлено

1. ✅ Добавлена проверка инициализации плагинов
2. ✅ Добавлена обработка ошибок в `ensureMenuExists`
3. ✅ Добавлена проверка `isInitialized()` перед использованием плагинов
4. ✅ Добавлена обработка ошибок при регистрации плагинов

## Следующие шаги

Если ошибка сохраняется, проверьте:
1. Логи при старте приложения - есть ли ошибки инициализации?
2. Логи при авторизации - какая именно ошибка возникает?
3. Проверьте, что все модули правильно импортированы в `app.module.ts`

