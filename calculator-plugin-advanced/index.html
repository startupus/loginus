<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
        }

        .calculator {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            padding: 20px;
            width: 100%;
            max-width: 320px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .header h2 {
            color: #00ff00;
            font-size: 1.2rem;
            font-weight: normal;
        }

        .status {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff00;
            animation: pulse 2s infinite;
            box-shadow: 0 0 4px #00ff00;
        }

        .status-dot.disconnected {
            background: #ff0000;
            box-shadow: 0 0 4px #ff0000;
        }

        #statusText {
            color: #888 !important;
            font-size: 0.7rem !important;
            font-family: 'Courier New', monospace;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .display {
            background: #000000;
            border: 2px solid #333;
            padding: 15px;
            border-radius: 0;
            margin-bottom: 15px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-end;
        }

        .expression {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 5px;
            min-height: 20px;
            font-family: 'Courier New', monospace;
        }

        .result {
            font-size: 2rem;
            color: #00ff00;
            font-weight: normal;
            word-wrap: break-word;
            text-align: right;
            font-family: 'Courier New', monospace;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        button {
            padding: 20px;
            font-size: 1.1rem;
            border: 1px solid #333;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.1s;
            font-weight: normal;
            background: #2a2a2a;
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }

        button:hover {
            background: #3a3a3a;
            border-color: #555;
        }

        button:active {
            background: #1a1a1a;
            transform: scale(0.98);
        }

        .operator {
            background: #333;
            color: #00ff00;
            border-color: #555;
        }

        .operator:hover {
            background: #444;
        }

        .equals {
            background: #006600;
            color: #00ff00;
            grid-column: span 2;
            border-color: #008800;
        }

        .equals:hover {
            background: #007700;
        }

        .clear {
            background: #660000;
            color: #ff0000;
            border-color: #880000;
        }

        .clear:hover {
            background: #770000;
        }

        .zero {
            grid-column: span 2;
        }

        .history {
            margin-top: 15px;
            padding: 10px;
            background: #000000;
            border: 1px solid #333;
            border-radius: 0;
            max-height: 150px;
            overflow-y: auto;
        }

        .history h3 {
            font-size: 0.8rem;
            color: #888;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }

        .history-item {
            padding: 6px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 0;
            margin-bottom: 4px;
            font-size: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #00ff00;
            font-family: 'Courier New', monospace;
        }

        .history-item .time {
            color: #888;
            font-size: 0.7rem;
        }

        .event-log {
            margin-top: 10px;
            padding: 8px;
            background: #000000;
            border: 1px solid #333;
            border-radius: 0;
            font-size: 0.7rem;
            color: #888;
            max-height: 80px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="header">
            <h2>üßÆ –£–º–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
            <div class="status">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText" style="font-size: 0.75rem; color: #718096;">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
            </div>
        </div>

        <div class="display">
            <div class="expression" id="expression"></div>
            <div class="result" id="result">0</div>
        </div>

        <div class="buttons">
            <button class="clear" onclick="clearDisplay()">C</button>
            <button class="operator" onclick="appendOperator('/')">/</button>
            <button class="operator" onclick="appendOperator('*')">√ó</button>
            
            <button onclick="appendNumber('7')">7</button>
            <button onclick="appendNumber('8')">8</button>
            <button onclick="appendNumber('9')">9</button>
            <button class="operator" onclick="appendOperator('-')">-</button>
            
            <button onclick="appendNumber('4')">4</button>
            <button onclick="appendNumber('5')">5</button>
            <button onclick="appendNumber('6')">6</button>
            <button class="operator" onclick="appendOperator('+')">+</button>
            
            <button onclick="appendNumber('1')">1</button>
            <button onclick="appendNumber('2')">2</button>
            <button onclick="appendNumber('3')">3</button>
            <button class="equals" onclick="calculate()">=</button>
            
            <button class="zero" onclick="appendNumber('0')">0</button>
            <button onclick="appendNumber('.')">.</button>
        </div>

        <div class="history" id="historyContainer" style="display: none;">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</h3>
            <div id="historyList"></div>
        </div>

        <div class="event-log" id="eventLog"></div>
    </div>

    <script>
        // === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
        // –ü–æ–ª—É—á–∞–µ–º slug –ø–ª–∞–≥–∏–Ω–∞ –∏–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏–ª–∏ –∏–∑ URL
        // –ü–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å —Å–≤–æ–π slug –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏
        const PLUGIN_SLUG = 'calculator-advanced'; // TODO: –ø–æ–ª—É—á–∞—Ç—å –∏–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –∏–ª–∏ postMessage
        
        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑—É–µ–º window.location.origin –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL
        // –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ localhost, —Ç–∞–∫ –∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ
        const API_BASE = `${window.location.origin}/api/v2`;
        let currentExpression = '';
        let currentResult = '0';
        let history = [];
        let backendConnected = false;

        // === –•–†–ê–ù–ï–ù–ò–ï –¢–û–ö–ï–ù–ê ===
        let authToken = null;

        // === –ü–û–õ–£–ß–ï–ù–ò–ï –¢–û–ö–ï–ù–ê –ò–ó LOCALSTORAGE (fallback) ===
        function getAuthToken() {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ postMessage
            if (authToken) {
                return authToken;
            }

            // Fallback: –ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ localStorage
            try {
                const authStore = localStorage.getItem('auth-store');
                if (authStore) {
                    const parsed = JSON.parse(authStore);
                    return parsed?.state?.accessToken || null;
                }
            } catch (e) {
                logEvent('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: ' + e.message);
            }
            return null;
        }

        // === –ü–†–û–í–ï–†–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö BACKEND ===
        async function checkBackendConnection() {
            const token = getAuthToken();
            if (!token) {
                updateStatus(false, '–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞');
                return false;
            }

            try {
                const response = await fetch(`${API_BASE}/profile/dashboard`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                const connected = response.ok;
                updateStatus(connected, connected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : '–û—à–∏–±–∫–∞');
                backendConnected = connected;
                return connected;
            } catch (error) {
                updateStatus(false, '–û—Ñ–ª–∞–π–Ω');
                logEvent('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + error.message);
                return false;
            }
        }

        // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø ===
        function updateStatus(connected, text) {
            const dot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            
            dot.className = 'status-dot' + (connected ? '' : ' disconnected');
            statusText.textContent = text;
        }

        // === –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –°–û–ë–´–¢–ò–ô –í UI ===
        function logEvent(message) {
            const eventLog = document.getElementById('eventLog');
            const time = new Date().toLocaleTimeString('ru-RU');
            eventLog.innerHTML = `[${time}] ${message}<br>` + eventLog.innerHTML;
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤
            const logs = eventLog.innerHTML.split('<br>').slice(0, 5);
            eventLog.innerHTML = logs.join('<br>');
        }

        // === –û–¢–ü–†–ê–í–ö–ê –°–û–ë–´–¢–ò–Ø –í BACKEND (—á–µ—Ä–µ–∑ EventBus) ===
        async function sendEventToBackend(eventName, data) {
            if (!backendConnected) {
                logEvent('‚ö†Ô∏è –°–æ–±—ã—Ç–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (–æ—Ñ–ª–∞–π–Ω)');
                return;
            }

            const token = getAuthToken();
            if (!token) return;

            try {
                const response = await fetch(`${API_BASE}/events/emit`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        eventName,
                        data: {
                            ...data,
                            pluginId: 'calculator-advanced',
                            timestamp: new Date().toISOString()
                        }
                    })
                });

                if (response.ok) {
                    logEvent(`‚úÖ –°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${eventName}`);
                } else {
                    logEvent(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ${response.status}`);
                }
            } catch (error) {
                logEvent(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
            }
        }

        // === –ö–û–ú–ú–£–ù–ò–ö–ê–¶–ò–Ø –° –†–û–î–ò–¢–ï–õ–¨–°–ö–ò–ú –û–ö–ù–û–ú ===
        function sendToParent(type, payload) {
            try {
                window.parent.postMessage({
                    source: 'calculator-plugin',
                    type,
                    payload,
                    timestamp: Date.now()
                }, '*');
                logEvent(`üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–æ–¥–∏—Ç–µ–ª—é: ${type}`);
            } catch (error) {
                logEvent(`‚ùå –û—à–∏–±–∫–∞ postMessage: ${error.message}`);
            }
        }

        // === –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–†–ê ===
        function appendNumber(num) {
            if (currentResult === '0' && num !== '.') {
                currentResult = num;
            } else {
                currentResult += num;
            }
            updateDisplay();
        }

        function appendOperator(op) {
            if (currentExpression && !currentExpression.endsWith(' ')) {
                currentExpression += ' ' + currentResult + ' ' + op;
                currentResult = '0';
                updateDisplay();
            } else if (!currentExpression) {
                currentExpression = currentResult + ' ' + op;
                currentResult = '0';
                updateDisplay();
            }
        }

        function clearDisplay() {
            currentExpression = '';
            currentResult = '0';
            updateDisplay();
            logEvent('üßπ –î–∏—Å–ø–ª–µ–π –æ—á–∏—â–µ–Ω');
        }

        async function calculate() {
            if (!currentExpression) return;

            const fullExpression = currentExpression + ' ' + currentResult;
            const token = getAuthToken();
            
            if (!token) {
                logEvent('‚ùå –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è');
                alert('–û—à–∏–±–∫–∞: –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');
                return;
            }

            try {
                // –ó–∞–º–µ–Ω—è–µ–º √ó –Ω–∞ * –¥–ª—è backend
                const safeExpression = fullExpression.replace(/√ó/g, '*');
                
                logEvent(`üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ backend: ${safeExpression}`);

                // üî• –í–´–ß–ò–°–õ–ï–ù–ò–ï –ù–ê BACKEND
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—ã–π –ø—É—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –ø–ª–∞–≥–∏–Ω–æ–≤
                // API_BASE —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç /api/v2, –ø–æ—ç—Ç–æ–º—É –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ —Å–Ω–æ–≤–∞
                const response = await fetch(`${API_BASE}/plugins/${PLUGIN_SLUG}/calculator/calculate`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        expression: safeExpression
                    })
                });

                const data = await response.json();

                if (!response.ok || !data.success) {
                    throw new Error(data.message || '–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ');
                }

                const result = data.data.result;

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                const historyItem = {
                    expression: fullExpression,
                    result: result,
                    timestamp: new Date().toISOString(),
                    time: new Date().toLocaleTimeString('ru-RU')
                };
                
                history.unshift(historyItem);
                if (history.length > 10) history.pop();
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('calculator-history', JSON.stringify(history));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                currentExpression = '';
                currentResult = result;
                updateDisplay();
                updateHistory();

                // üî• –û–¢–ü–†–ê–í–õ–Ø–ï–ú –†–û–î–ò–¢–ï–õ–¨–°–ö–û–ú–£ –û–ö–ù–£
                sendToParent('CALCULATION_DONE', {
                    expression: fullExpression,
                    result: result
                });

                logEvent(`‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ backend: ${fullExpression} = ${result}`);
                
            } catch (error) {
                logEvent(`‚ùå –û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: ${error.message}`);
                
                alert('–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: ' + error.message);
            }
        }

        function updateDisplay() {
            document.getElementById('expression').textContent = currentExpression || ' ';
            document.getElementById('result').textContent = currentResult;
        }

        function updateHistory() {
            const historyContainer = document.getElementById('historyContainer');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyContainer.style.display = 'none';
                sendWidgetSize(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä
                return;
            }

            historyContainer.style.display = 'block';
            historyList.innerHTML = history.map(item => `
                <div class="history-item">
                    <span>${item.expression} = ${item.result}</span>
                    <span class="time">${item.time}</span>
                </div>
            `).join('');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
            setTimeout(() => {
                sendWidgetSize();
            }, 100);
        }

        // === –ó–ê–ì–†–£–ó–ö–ê –ò–°–¢–û–†–ò–ò –ò–ó LOCALSTORAGE ===
        function loadHistory() {
            try {
                const saved = localStorage.getItem('calculator-history');
                if (saved) {
                    history = JSON.parse(saved);
                    updateHistory();
                    logEvent(`üìÇ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${history.length} –∑–∞–ø–∏—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏`);
                }
            } catch (error) {
                logEvent(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏: ${error.message}`);
            }
        }

        // === –°–õ–£–®–ê–¢–ï–õ–¨ –°–û–ë–´–¢–ò–ô –û–¢ –†–û–î–ò–¢–ï–õ–¨–°–ö–û–ì–û –û–ö–ù–ê ===
        window.addEventListener('message', (event) => {
            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞
            if (event.data.type === 'LOGINUS_AUTH_TOKEN') {
                authToken = event.data.token;
                logEvent('üîë –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞');
                updateStatus(true, '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ');
                backendConnected = true;
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º
                checkBackendConnection();
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            if (event.data.type === 'USER_SETTINGS_UPDATED') {
                logEvent('‚öôÔ∏è –ü–æ–ª—É—á–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏');
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º—É)
                console.log('Settings:', event.data.payload);
            }
        });

        // === –û–¢–ü–†–ê–í–ö–ê –†–ê–ó–ú–ï–†–ê –í–ò–î–ñ–ï–¢–ê –†–û–î–ò–¢–ï–õ–Æ ===
        function sendWidgetSize() {
            try {
                const height = document.body.scrollHeight;
                window.parent.postMessage({
                    type: 'WIDGET_RESIZE',
                    widgetId: 'calculator-advanced', // –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ URL –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                    height: height,
                    timestamp: Date.now()
                }, '*');
            } catch (error) {
                console.error('Error sending widget size:', error);
            }
        }

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        async function init() {
            logEvent('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞...');
            loadHistory();
            await checkBackendConnection();
            
            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            setInterval(checkBackendConnection, 30000);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(() => {
                sendWidgetSize();
            }, 500);
            
            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
            const resizeObserver = new ResizeObserver(() => {
                sendWidgetSize();
            });
            resizeObserver.observe(document.body);
            
            logEvent('‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≥–æ—Ç–æ–≤!');
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        init();
    </script>
</body>
</html>

