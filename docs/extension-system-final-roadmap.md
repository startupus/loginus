# Loginus Extension System - –ü–æ–ª–Ω—ã–π Roadmap

## üéØ –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –≤–∏–¥–∂–µ—Ç–æ–≤) —Å event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –≥–¥–µ:
- **–ü–ª–∞–≥–∏–Ω—ã** = –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ + UI (–æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é)
- **–í–∏–¥–∂–µ—Ç—ã** = iframe –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏)
- **Event System** = —Ö—É–∫–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ó–∞–≥—Ä—É–∑–∫–∞** = .zip —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–∏—è
‚îú‚îÄ‚îÄ –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π    (–≤—Å–µ –ø–ª–∞–≥–∏–Ω—ã + –≤–∏–¥–∂–µ—Ç—ã)
‚îú‚îÄ‚îÄ –ü–ª–∞–≥–∏–Ω—ã               (–∑–∞–≥—Ä—É–∑–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞–º–∏)
‚îî‚îÄ‚îÄ –í–∏–¥–∂–µ—Ç—ã               (–∑–∞–≥—Ä—É–∑–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞–º–∏)

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω—é
‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç        (–≤—ã–±–æ—Ä –ø–ª–∞–≥–∏–Ω–∞, –∞–≤—Ç–æ–ø—É—Ç–∏)
‚îú‚îÄ‚îÄ Drag & Drop           (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π + –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π)
‚îî‚îÄ‚îÄ –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å           (1 —É—Ä–æ–≤–µ–Ω—å: —Ä–æ–¥–∏—Ç–µ–ª—å/—Ä–µ–±–µ–Ω–æ–∫)

–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îî‚îÄ‚îÄ –í–∏–¥–∂–µ—Ç—ã               (iframe –∫–∞—Ä—Ç–æ—á–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–º)
```

---

## üóÇÔ∏è –¢–∏–ø—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã:
1. **–í–∏–¥–∂–µ—Ç—ã** - iframe –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
2. **–ü—É–Ω–∫—Ç—ã –º–µ–Ω—é** - UI –ø–ª–∞–≥–∏–Ω—ã —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
3. **–û–ø–ª–∞—Ç–∞** - –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
4. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Å–ø–æ—Å–æ–±—ã –≤—Ö–æ–¥–∞
5. **–ö–æ–Ω—Ç–µ–Ω—Ç** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
6. **–°–∏—Å—Ç–µ–º–∞** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
7. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
8. **API** - –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –¢–∏–ø—ã UI –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤:
- **iframe** - –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç –≤ iframe
- **embedded** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ SPA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **external** - –≤–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞ (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –∏–ª–∏ —Ç–µ–∫—É—â–µ–π)

---

## üìÖ ROADMAP (16-20 –Ω–µ–¥–µ–ª—å)

### **–§–ê–ó–ê 1: Backend - Event System & Plugin Infrastructure (4-5 –Ω–µ–¥–µ–ª—å)**

#### –ù–µ–¥–µ–ª—è 1-2: Event Bus & Core Events
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π –∏ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–ª–∞–≥–∏–Ω–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å EventBusService —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å 50+ –±–∞–∑–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π —Å–∏—Å—Ç–µ–º—ã
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Plugin –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

**–°–æ–±—ã—Ç–∏—è (–ø—Ä–∏–º–µ—Ä—ã):**
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
user.before_create
user.after_create
user.before_update
user.after_update
user.before_delete
user.after_delete
user.login
user.logout
user.password_changed

// –ú–µ–Ω—é
menu.before_render
menu.after_render
menu.item.before_click
menu.item.after_click
menu.item.created
menu.item.updated
menu.item.deleted
menu.structure_changed

// –í–∏–¥–∂–µ—Ç—ã
widget.before_load
widget.after_load
widget.before_render
widget.after_render
widget.data_received
widget.error

// –î–∞–Ω–Ω—ã–µ
data.before_create
data.after_create
data.before_update
data.after_update
data.before_delete
data.after_delete
data.validated

// –°–∏—Å—Ç–µ–º–∞
system.startup
system.shutdown
system.config_changed
plugin.installed
plugin.enabled
plugin.disabled
plugin.uninstalled

// –ö–æ–Ω—Ç–µ–Ω—Ç
content.before_render
content.after_render
content.before_save
content.after_save

// –û–ø–ª–∞—Ç–∞
payment.before_process
payment.after_process
payment.success
payment.failed
payment.refund

// –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
auth.before_login
auth.after_login
auth.login_failed
auth.token_refresh
auth.session_expired
```

**–§–∞–π–ª—ã:**
```
backend/src/core/events/
‚îú‚îÄ‚îÄ event-bus.service.ts
‚îú‚îÄ‚îÄ event-emitter.interface.ts
‚îú‚îÄ‚îÄ event-handler.interface.ts
‚îú‚îÄ‚îÄ event-logger.service.ts
‚îî‚îÄ‚îÄ events/
    ‚îú‚îÄ‚îÄ user.events.ts
    ‚îú‚îÄ‚îÄ menu.events.ts
    ‚îú‚îÄ‚îÄ widget.events.ts
    ‚îú‚îÄ‚îÄ data.events.ts
    ‚îú‚îÄ‚îÄ system.events.ts
    ‚îú‚îÄ‚îÄ content.events.ts
    ‚îú‚îÄ‚îÄ payment.events.ts
    ‚îî‚îÄ‚îÄ auth.events.ts
```

#### –ù–µ–¥–µ–ª—è 3: Plugin Registry & Loader
**–¶–µ–ª—å:** –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–∞–≥–∏–Ω–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ë–î –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –≤–∏–¥–∂–µ—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PluginRegistryService
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PluginLoaderService (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ plugins/)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å lifecycle hooks (onInstall, onEnable, onDisable)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–ø–ª–∞–≥–∏–Ω—ã + –≤–∏–¥–∂–µ—Ç—ã)
CREATE TABLE extensions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  slug VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  version VARCHAR(50) NOT NULL,
  author VARCHAR(255),
  author_email VARCHAR(255),
  author_url VARCHAR(500),
  
  -- –¢–∏–ø —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
  extension_type VARCHAR(50) NOT NULL, -- 'widget', 'menu_item', 'payment', 'auth', etc.
  
  -- –¢–∏–ø UI (–¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤ —Å UI)
  ui_type VARCHAR(50), -- 'iframe', 'embedded', 'external', null
  
  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  icon VARCHAR(100),
  path_on_disk VARCHAR(500), -- –ü—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º –ø–ª–∞–≥–∏–Ω–∞
  manifest JSONB, -- –ü–æ–ª–Ω—ã–π manifest.json
  config JSONB, -- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
  
  -- –°–æ–±—ã—Ç–∏—è
  subscribed_events JSONB, -- –°–æ–±—ã—Ç–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω
  
  -- –°—Ç–∞—Ç—É—Å
  enabled BOOLEAN DEFAULT false,
  installed_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_extensions_slug ON extensions(slug);
CREATE INDEX idx_extensions_enabled ON extensions(enabled);
CREATE INDEX idx_extensions_type ON extensions(extension_type);

-- –ü—Ä–∏–≤—è–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –∫ –ø—É–Ω–∫—Ç–∞–º –º–µ–Ω—é
CREATE TABLE menu_item_plugins (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  menu_item_id VARCHAR(255) NOT NULL,
  plugin_id UUID REFERENCES extensions(id),
  config JSONB, -- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞
  created_at TIMESTAMP DEFAULT NOW()
);

-- –í–∏–¥–∂–µ—Ç—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
CREATE TABLE profile_widgets (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  widget_id UUID REFERENCES extensions(id),
  position INTEGER, -- –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  width INTEGER DEFAULT 1, -- –®–∏—Ä–∏–Ω–∞ –≤ grid units
  height INTEGER DEFAULT 1, -- –í—ã—Å–æ—Ç–∞ –≤ grid units
  config JSONB, -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞
  enabled BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –õ–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
CREATE TABLE event_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  event_name VARCHAR(255) NOT NULL,
  payload JSONB,
  plugin_id UUID REFERENCES extensions(id),
  status VARCHAR(50), -- 'success', 'error'
  error TEXT,
  execution_time INTEGER, -- –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_event_logs_name ON event_logs(event_name);
CREATE INDEX idx_event_logs_plugin ON event_logs(plugin_id);
CREATE INDEX idx_event_logs_created ON event_logs(created_at);
```

#### –ù–µ–¥–µ–ª—è 4-5: Plugin Upload & Installation
**–¶–µ–ª—å:** –ó–∞–≥—Ä—É–∑–∫–∞ .zip —Ñ–∞–π–ª–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] API endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ .zip
- [ ] –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è .zip —Ñ–∞–π–ª–æ–≤
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ manifest.json
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–ª–∞–≥–∏–Ω–∞
- [ ] –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript –ø–ª–∞–≥–∏–Ω–∞
- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤, —Ä–∞–∑–º–µ—Ä–∞, –∏ —Ç.–¥.)

**API Endpoints:**
```typescript
POST   /api/admin/extensions/upload        # –ó–∞–≥—Ä—É–∑–∫–∞ .zip
GET    /api/admin/extensions                # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
GET    /api/admin/extensions/:id           # –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
POST   /api/admin/extensions/:id/enable    # –í–∫–ª—é—á–∏—Ç—å
POST   /api/admin/extensions/:id/disable   # –í—ã–∫–ª—é—á–∏—Ç—å
DELETE /api/admin/extensions/:id           # –£–¥–∞–ª–∏—Ç—å
PUT    /api/admin/extensions/:id/config    # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
```

---

### **–§–ê–ó–ê 2: Frontend - –†–∞–∑–¥–µ–ª "–†–∞—Å—à–∏—Ä–µ–Ω–∏—è" (3-4 –Ω–µ–¥–µ–ª–∏)**

#### –ù–µ–¥–µ–ª—è 6-7: –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
**–¶–µ–ª—å:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ExtensionsManagerPage
- [ ] –°–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- [ ] –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É (–í–∏–¥–∂–µ—Ç—ã, –ü—É–Ω–∫—Ç—ã –º–µ–Ω—é, –û–ø–ª–∞—Ç–∞, –∏ —Ç.–¥.)
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –∏–º–µ–Ω–∏, –¥–∞—Ç–µ, —Å—Ç–∞—Ç—É—Å—É)
- [ ] –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/–æ–ø–∏—Å–∞–Ω–∏—é
- [ ] –î–µ–π—Å—Ç–≤–∏—è: –í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å/–£–¥–∞–ª–∏—Ç—å/–ù–∞—Å—Ç—Ä–æ–∏—Ç—å

**UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```tsx
// frontend/src/pages/admin/ExtensionsManagerPage.tsx
<PageTemplate title="–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π">
  <div className="extensions-manager">
    {/* –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ */}
    <div className="filters">
      <Input
        placeholder="–ü–æ–∏—Å–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π..."
        icon="search"
      />
      <Select
        label="–¢–∏–ø"
        options={[
          { value: 'all', label: '–í—Å–µ' },
          { value: 'widget', label: '–í–∏–¥–∂–µ—Ç—ã' },
          { value: 'menu_item', label: '–ü—É–Ω–∫—Ç—ã –º–µ–Ω—é' },
          { value: 'payment', label: '–û–ø–ª–∞—Ç–∞' },
          // ...
        ]}
      />
      <Select
        label="–°—Ç–∞—Ç—É—Å"
        options={[
          { value: 'all', label: '–í—Å–µ' },
          { value: 'enabled', label: '–í–∫–ª—é—á–µ–Ω–æ' },
          { value: 'disabled', label: '–í—ã–∫–ª—é—á–µ–Ω–æ' },
        ]}
      />
    </div>
    
    {/* –°–ø–∏—Å–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π */}
    <div className="extensions-grid">
      {extensions.map(ext => (
        <ExtensionCard
          extension={ext}
          onEnable={() => enable(ext.id)}
          onDisable={() => disable(ext.id)}
          onConfigure={() => configure(ext.id)}
          onDelete={() => deleteExt(ext.id)}
        />
      ))}
    </div>
  </div>
</PageTemplate>
```

#### –ù–µ–¥–µ–ª—è 8: –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü–ª–∞–≥–∏–Ω—ã"
**–¶–µ–ª—å:** –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ .zip

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É PluginsPage
- [ ] –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ .zip —Ñ–∞–π–ª–∞ (drag & drop)
- [ ] –ü–æ–ª—è: –ù–∞–∑–≤–∞–Ω–∏–µ, –¢–∏–ø (–≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞)
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ (—Ä–∞–∑–º–µ—Ä, —Ñ–æ—Ä–º–∞—Ç)
- [ ] –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

**UI:**
```tsx
// frontend/src/pages/admin/PluginsPage.tsx
<PageTemplate title="–ü–ª–∞–≥–∏–Ω—ã">
  <Card>
    <h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–∞–≥–∏–Ω</h2>
    
    <Form onSubmit={handleUpload}>
      <Input
        label="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞"
        required
        value={name}
        onChange={setName}
      />
      
      <Select
        label="–¢–∏–ø —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è"
        required
        options={[
          { value: 'menu_item', label: '–ü—É–Ω–∫—Ç –º–µ–Ω—é' },
          { value: 'payment', label: '–û–ø–ª–∞—Ç–∞' },
          { value: 'auth', label: '–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è' },
          { value: 'content', label: '–ö–æ–Ω—Ç–µ–Ω—Ç' },
          { value: 'system', label: '–°–∏—Å—Ç–µ–º–∞' },
          { value: 'user', label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' },
          { value: 'api', label: 'API' },
        ]}
      />
      
      <DropZone
        accept=".zip"
        maxSize={50 * 1024 * 1024} // 50MB
        onDrop={setFile}
      >
        {file ? (
          <FilePreview file={file} onRemove={() => setFile(null)} />
        ) : (
          <DropZonePlaceholder />
        )}
      </DropZone>
      
      <Button type="submit" loading={uploading}>
        –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–ª–∞–≥–∏–Ω
      </Button>
    </Form>
  </Card>
  
  {/* –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ */}
  <Card className="mt-6">
    <h2>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã</h2>
    <DataTable
      data={plugins}
      columns={[
        { key: 'name', label: '–ù–∞–∑–≤–∞–Ω–∏–µ' },
        { key: 'version', label: '–í–µ—Ä—Å–∏—è' },
        { key: 'extensionType', label: '–¢–∏–ø' },
        { key: 'enabled', label: '–°—Ç–∞—Ç—É—Å' },
        { key: 'actions', label: '–î–µ–π—Å—Ç–≤–∏—è' },
      ]}
    />
  </Card>
</PageTemplate>
```

#### –ù–µ–¥–µ–ª—è 9: –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–í–∏–¥–∂–µ—Ç—ã"
**–¶–µ–ª—å:** –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–∂–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ .zip

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É WidgetsPage
- [ ] –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ .zip —Ñ–∞–π–ª–∞
- [ ] –ü–æ–ª–µ: –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∏–ø–∞ "–í–∏–¥–∂–µ—Ç"
- [ ] –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤
- [ ] Preview –≤–∏–¥–∂–µ—Ç–∞

**UI:** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ PluginsPage, –Ω–æ –±–µ–∑ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞)

---

### **–§–ê–ó–ê 3: Frontend - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω—é (3-4 –Ω–µ–¥–µ–ª–∏)**

#### –ù–µ–¥–µ–ª—è 10-11: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ MenuSettingsPage
**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –ø–ª–∞–≥–∏–Ω–∞ –∏ –∞–≤—Ç–æ–ø—É—Ç–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ "–ü–ª–∞–≥–∏–Ω" (–≤—ã–±–æ—Ä –∏–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö)
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ "URL" ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—É—Ç—å —Ä–∞–∑–¥–µ–ª–∞
- [ ] –ê–≤—Ç–æ–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ "–ü—É—Ç—å" –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ —Ä–æ–¥–∏—Ç–µ–ª—è
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ UI –ø–ª–∞–≥–∏–Ω–∞ (iframe/embedded/external)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–∏ menu_item ‚Üî plugin

**–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—É–Ω–∫—Ç–∞:**
```tsx
<Modal title="–î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é">
  <Form>
    <Input
      label="–ù–∞–∑–≤–∞–Ω–∏–µ"
      value={item.label}
      onChange={(e) => setItem({ ...item, label: e.target.value })}
    />
    
    {/* –ù–û–í–û–ï: –í—ã–±–æ—Ä –ø–ª–∞–≥–∏–Ω–∞ */}
    <Select
      label="–ü–ª–∞–≥–∏–Ω"
      options={availablePlugins.map(p => ({
        value: p.id,
        label: `${p.name} (${p.extensionType})`
      }))}
      value={item.pluginId}
      onChange={(pluginId) => {
        const plugin = availablePlugins.find(p => p.id === pluginId);
        setItem({
          ...item,
          pluginId,
          type: plugin.uiType, // iframe, embedded, external
          // URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è
        });
      }}
    />
    
    {/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º URL —Ä–∞–∑–¥–µ–ª–∞ (–Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è) */}
    <Input
      label="URL —Ä–∞–∑–¥–µ–ª–∞"
      value={generatePath(item.label, item.parent)}
      disabled
      hint="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"
    />
    
    {/* –ê–≤—Ç–æ–≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å */}
    <Input
      label="–ü—É—Ç—å"
      value={item.path}
      disabled
      hint="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: /—Ä–æ–¥–∏—Ç–µ–ª—å/–¥–æ—á–µ—Ä–Ω–∏–π"
    />
    
    <Select
      label="–ò–∫–æ–Ω–∫–∞"
      options={iconOptions}
    />
    
    <Button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
  </Form>
</Modal>
```

**–õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–ø—É—Ç–µ–π:**
```typescript
// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É—Ç–∏
function generatePath(label: string, parentId?: string): string {
  // –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∏ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ–±–µ–ª–æ–≤ –Ω–∞ –¥–µ—Ñ–∏—Å—ã
  const slug = transliterate(label)
    .toLowerCase()
    .replace(/\s+/g, '-')
    .replace(/[^\w-]/g, '');
  
  if (parentId) {
    const parent = menuItems.find(m => m.id === parentId);
    if (parent) {
      return `${parent.path}/${slug}`;
    }
  }
  
  return `/${slug}`;
}

// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è - –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—É—Ç–∏ –¥–µ—Ç–µ–π
function onParentChange(itemId: string, newParentId: string | null) {
  const item = menuItems.find(m => m.id === itemId);
  item.parent = newParentId;
  item.path = generatePath(item.label, newParentId);
  
  // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—É—Ç–∏ –≤—Å–µ—Ö –¥–µ—Ç–µ–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
  updateChildrenPaths(itemId);
}

function updateChildrenPaths(parentId: string) {
  const children = menuItems.filter(m => m.parent === parentId);
  
  for (const child of children) {
    child.path = generatePath(child.label, parentId);
    updateChildrenPaths(child.id); // –†–µ–∫—É—Ä—Å–∏—è
  }
}
```

#### –ù–µ–¥–µ–ª—è 12: –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π Drag & Drop
**–¶–µ–ª—å:** –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞ (–≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å)

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å DndContext –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
- [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (–º–æ–∂–Ω–æ –≤–ª–æ–∂–∏—Ç—å)
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥–ª—É–±–∏–Ω—ã (1 —É—Ä–æ–≤–µ–Ω—å)
- [ ] –ê–≤—Ç–æ–ø–µ—Ä–µ—Å—á–µ—Ç –ø—É—Ç–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–µ–π

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```tsx
// –ò—Å–ø–æ–ª—å–∑—É–µ–º @dnd-kit —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
import { DndContext, DragOverlay, closestCenter } from '@dnd-kit/core';
import { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';

const handleDragEnd = (event) => {
  const { active, over } = event;
  
  if (!over) return;
  
  const activeItem = items.find(i => i.id === active.id);
  const overItem = items.find(i => i.id === over.id);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –≤–ª–æ–∂–∏—Ç—å
  if (canBeNested(activeItem, overItem)) {
    // –î–µ–ª–∞–µ–º activeItem –¥–æ—á–µ—Ä–Ω–∏–º –¥–ª—è overItem
    activeItem.parent = overItem.id;
    activeItem.path = generatePath(activeItem.label, overItem.id);
    
    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—É—Ç–∏ –¥–µ—Ç–µ–π
    updateChildrenPaths(activeItem.id);
  } else {
    // –û–±—ã—á–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ)
    // ...
  }
};

function canBeNested(item, target) {
  // –ù–µ–ª—å–∑—è –≤–ª–æ–∂–∏—Ç—å –≤ —Å–µ–±—è
  if (item.id === target.id) return false;
  
  // –ù–µ–ª—å–∑—è –≤–ª–æ–∂–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è –≤ —Ä–µ–±–µ–Ω–∫–∞
  if (target.parent === item.id) return false;
  
  // –ù–µ–ª—å–∑—è –≤–ª–æ–∂–∏—Ç—å, –µ—Å–ª–∏ target —É–∂–µ –∏–º–µ–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è (–≥–ª—É–±–∏–Ω–∞ = 1)
  if (target.parent) return false;
  
  return true;
}
```

---

### **–§–ê–ó–ê 4: Frontend - –í–∏–¥–∂–µ—Ç—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ (2-3 –Ω–µ–¥–µ–ª–∏)**

#### –ù–µ–¥–µ–ª—è 13-14: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞–º–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
**–¶–µ–ª—å:** –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –≤–∏–¥–∂–µ—Ç—ã –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ó–∞–¥–∞—á–∏:**
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è (–∞–¥–º–∏–Ω–∫–∞)
- [ ] –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç"
- [ ] –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∏–¥–∂–µ—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞ (—à–∏—Ä–∏–Ω–∞/–≤—ã—Å–æ—Ç–∞)
- [ ] Drag & Drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞

**–ê–¥–º–∏–Ω–∫–∞:**
```tsx
// frontend/src/pages/admin/ProfileWidgetsPage.tsx
<PageTemplate title="–í–∏–¥–∂–µ—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è">
  <Card>
    <div className="flex justify-between items-center mb-4">
      <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã</h2>
      <Button onClick={() => setShowModal(true)}>
        –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç
      </Button>
    </div>
    
    {/* –°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤ —Å drag & drop */}
    <DndContext onDragEnd={handleReorder}>
      <SortableContext items={profileWidgets}>
        {profileWidgets.map(widget => (
          <WidgetCard
            key={widget.id}
            widget={widget}
            onRemove={() => removeWidget(widget.id)}
            onConfigure={() => configureWidget(widget.id)}
          />
        ))}
      </SortableContext>
    </DndContext>
  </Card>
  
  {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞ */}
  <Modal
    isOpen={showModal}
    onClose={() => setShowModal(false)}
    title="–í—ã–±—Ä–∞—Ç—å –≤–∏–¥–∂–µ—Ç"
  >
    <div className="widgets-grid">
      {availableWidgets.map(widget => (
        <WidgetPreviewCard
          widget={widget}
          onSelect={() => addWidget(widget.id)}
        />
      ))}
    </div>
  </Modal>
</PageTemplate>
```

#### –ù–µ–¥–µ–ª—è 15: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
**–¶–µ–ª—å:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤–∏–¥–∂–µ—Ç—ã –∫–∞–∫ iframe –∫–∞—Ä—Ç–æ—á–∫–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å DashboardPage (–ø—Ä–æ—Ñ–∏–ª—å)
- [ ] Grid layout –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ iframe –∫–∞—Ä—Ç–æ—á–∫–∏
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É (–º–∏–Ω/–º–∞–∫—Å –≤—ã—Å–æ—Ç–∞/—à–∏—Ä–∏–Ω–∞)
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–∂–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ API

**UI –ø—Ä–æ—Ñ–∏–ª—è:**
```tsx
// frontend/src/pages/DashboardPage.tsx
<PageTemplate>
  {/* –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª—è */}
  <ProfileContent />
  
  {/* –ù–û–í–û–ï: –í–∏–¥–∂–µ—Ç—ã */}
  <div className="profile-widgets">
    <h2>–í–∏–¥–∂–µ—Ç—ã</h2>
    
    <div className="widgets-grid">
      {widgets.map(widget => (
        <WidgetIframeCard
          key={widget.id}
          widget={widget}
          width={widget.width} // Grid units
          height={widget.height}
        />
      ))}
    </div>
  </div>
</PageTemplate>

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–¥–∂–µ—Ç–∞
const WidgetIframeCard = ({ widget, width, height }) => {
  return (
    <Card
      className="widget-card"
      style={{
        gridColumn: `span ${width}`,
        gridRow: `span ${height}`,
        minHeight: '200px',
        maxHeight: '600px',
        minWidth: '300px',
        maxWidth: '800px',
      }}
    >
      <div className="widget-header">
        <Icon name={widget.icon} />
        <h3>{widget.name}</h3>
      </div>
      
      <div className="widget-content">
        <iframe
          src={widget.url}
          title={widget.name}
          style={{
            width: '100%',
            height: '100%',
            border: 'none',
          }}
          sandbox="allow-scripts allow-same-origin"
        />
      </div>
    </Card>
  );
};
```

---

### **–§–ê–ó–ê 5: Backend - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ–±—ã—Ç–∏—è–º–∏ (2-3 –Ω–µ–¥–µ–ª–∏)**

#### –ù–µ–¥–µ–ª—è 16-17: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–¥–µ
**–¶–µ–ª—å:** –†–∞—Å–∫–∏–¥–∞—Ç—å —Ö—É–∫–∏ –ø–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –•—É–∫–∏ –≤ –º–µ–Ω—é (render, click, create, update)
- [ ] –•—É–∫–∏ –≤ –≤–∏–¥–∂–µ—Ç—ã (load, render, data)
- [ ] –•—É–∫–∏ –≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- [ ] –•—É–∫–∏ –≤ –æ–ø–ª–∞—Ç—É
- [ ] Middleware –¥–ª—è —Å–æ–±—ã—Ç–∏–π

**–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**

```typescript
// –í AuthController
@Post('login')
async login(@Body() dto: LoginDto) {
  // –°–æ–±—ã—Ç–∏–µ –ü–ï–†–ï–î –ª–æ–≥–∏–Ω–æ–º
  const beforeResult = await this.eventBus.emit('auth.before_login', {
    email: dto.email,
    ip: req.ip
  });
  
  // –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –ø–ª–∞–≥–∏–Ω –≤–µ—Ä–Ω—É–ª false - –±–ª–æ–∫–∏—Ä—É–µ–º
  if (beforeResult === false) {
    throw new UnauthorizedException('Login blocked by plugin');
  }
  
  // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
  const user = await this.authService.login(dto);
  
  // –°–æ–±—ã—Ç–∏–µ –ü–û–°–õ–ï –ª–æ–≥–∏–Ω–∞
  await this.eventBus.emit('auth.after_login', {
    user: {
      id: user.id,
      email: user.email,
      name: user.name
    },
    ip: req.ip,
    timestamp: new Date()
  });
  
  return user;
}

// –í MenuController
@Get('menu-settings')
async getMenuSettings() {
  const menu = await this.menuService.getSettings();
  
  // –°–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º –º–µ–Ω—é
  await this.eventBus.emit('menu.before_render', { menu });
  
  return menu;
}

// –í ProfileController
@Get('widgets')
async getProfileWidgets(@CurrentUser() user) {
  const widgets = await this.widgetService.getForUser(user.id);
  
  // –°–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –≤–∏–¥–∂–µ—Ç–æ–≤
  await this.eventBus.emit('widget.before_load', { 
    userId: user.id,
    widgets 
  });
  
  return widgets;
}
```

#### –ù–µ–¥–µ–ª—è 18: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤
**–¶–µ–ª—å:** –ü–ª–∞–≥–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç —Å–≤–æ–∏ —Ö—É–∫–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- [ ] Lifecycle hooks (onInstall, onEnable, onDisable)
- [ ] Hot reload –ø–ª–∞–≥–∏–Ω–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**Loader:**
```typescript
// backend/src/plugins/plugin-loader.service.ts
@Injectable()
export class PluginLoaderService implements OnModuleInit {
  constructor(
    private eventBus: EventBusService,
    private registry: PluginRegistryService
  ) {}
  
  async onModuleInit() {
    await this.loadAllPlugins();
  }
  
  async loadAllPlugins() {
    const plugins = await this.registry.getEnabled();
    
    for (const pluginMeta of plugins) {
      try {
        await this.loadPlugin(pluginMeta);
      } catch (error) {
        console.error(`Failed to load plugin ${pluginMeta.slug}:`, error);
      }
    }
  }
  
  async loadPlugin(meta: ExtensionMetadata) {
    // 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω
    const pluginPath = path.join(meta.pathOnDisk, 'plugin.js');
    const PluginClass = (await import(pluginPath)).default;
    
    // 2. –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä
    const plugin = new PluginClass(meta, this.eventBus);
    
    // 3. –í—ã–∑—ã–≤–∞–µ–º onEnable
    if (plugin.onEnable) {
      await plugin.onEnable();
    }
    
    // 4. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    if (plugin.registerEventHandlers) {
      plugin.registerEventHandlers();
    }
    
    console.log(`‚úì Plugin ${meta.slug} loaded successfully`);
  }
}
```

---

### **–§–ê–ó–ê 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã (1-2 –Ω–µ–¥–µ–ª–∏)**

#### –ù–µ–¥–µ–ª—è 19-20: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
**–¶–µ–ª—å:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å Developer Guide
- [ ] –ü—Ä–∏–º–µ—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤ (3-5 —à—Ç—É–∫)
- [ ] API Reference
- [ ] –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] Best practices
- [ ] FAQ

**–ü—Ä–∏–º–µ—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤:**
1. Email Notification Plugin (–ø—Ä–æ—Å—Ç–æ–π)
2. Analytics Dashboard (hybrid —Å UI)
3. Custom Authentication (auth)
4. Payment Gateway (payment)
5. Weather Widget (–≤–∏–¥–∂–µ—Ç)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–ª–∞–≥–∏–Ω–∞

### manifest.json
```json
{
  "slug": "analytics-dashboard",
  "name": "Analytics Dashboard",
  "description": "Comprehensive analytics and reporting dashboard",
  "version": "1.0.0",
  "author": {
    "name": "Loginus Team",
    "email": "dev@loginus.ru",
    "url": "https://loginus.ru"
  },
  
  "extensionType": "menu_item",
  
  "ui": {
    "enabled": true,
    "type": "embedded",
    "icon": "chart-bar",
    "path": "/analytics",
    "label": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞",
    "labelRu": "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞",
    "labelEn": "Analytics"
  },
  
  "events": {
    "subscribes": [
      "user.login",
      "data.created",
      "data.updated",
      "menu.before_render"
    ]
  },
  
  "api": {
    "endpoints": [
      {
        "method": "GET",
        "path": "/stats",
        "description": "Get aggregated statistics"
      },
      {
        "method": "GET",
        "path": "/reports/:id",
        "description": "Get specific report"
      }
    ]
  },
  
  "dependencies": {
    "axios": "^1.6.0",
    "date-fns": "^2.30.0"
  }
}
```

### plugin.ts
```typescript
import { Plugin, EventPayload } from '@loginus/plugin-sdk';

export default class AnalyticsDashboardPlugin extends Plugin {
  private stats: Map<string, number> = new Map();
  
  async onInstall(): Promise<void> {
    console.log('Analytics plugin installed');
    // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    await this.createTables();
  }
  
  async onEnable(): Promise<void> {
    console.log('Analytics plugin enabled');
    this.stats.clear();
  }
  
  async onDisable(): Promise<void> {
    console.log('Analytics plugin disabled');
  }
  
  registerEventHandlers(): void {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ª–æ–≥–∏–Ω—ã
    this.on('user.login', async (event: EventPayload) => {
      const count = this.stats.get('logins') || 0;
      this.stats.set('logins', count + 1);
      
      console.log(`Total logins: ${count + 1}`);
    });
    
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    this.on('data.created', async (event: EventPayload) => {
      const count = this.stats.get('data_created') || 0;
      this.stats.set('data_created', count + 1);
    });
    
    // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –º–µ–Ω—é –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º
    this.on('menu.before_render', async (event: EventPayload) => {
      // –î–æ–±–∞–≤–ª—è–µ–º –±–µ–π–¥–∂ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      const menu = event.data.menu;
      const analyticsItem = menu.items.find(i => i.id === 'analytics');
      
      if (analyticsItem) {
        analyticsItem.badge = this.stats.get('data_created') || 0;
      }
      
      return true; // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ü–µ–ø–æ—á–∫—É
    });
  }
  
  // API endpoints
  @Get('/stats')
  async getStats() {
    return {
      logins: this.stats.get('logins') || 0,
      dataCreated: this.stats.get('data_created') || 0,
      dataUpdated: this.stats.get('data_updated') || 0
    };
  }
  
  @Get('/reports/:id')
  async getReport(@Param('id') id: string) {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
    return {
      id,
      data: [],
      generatedAt: new Date()
    };
  }
  
  private async createTables() {
    // SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
  }
}
```

### package.json
```json
{
  "name": "analytics-dashboard",
  "version": "1.0.0",
  "main": "plugin.js",
  "scripts": {
    "build": "tsc"
  },
  "dependencies": {
    "axios": "^1.6.0",
    "date-fns": "^2.30.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
```

### frontend/index.html (UI –ø–ª–∞–≥–∏–Ω–∞)
```html
<!DOCTYPE html>
<html>
<head>
  <title>Analytics Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .stat-card {
      padding: 20px;
      background: #f5f5f5;
      border-radius: 8px;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <h1>Analytics Dashboard</h1>
  
  <div id="stats"></div>
  
  <script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ API –ø–ª–∞–≥–∏–Ω–∞
    async function loadStats() {
      const response = await fetch('/api/plugins/analytics-dashboard/stats');
      const stats = await response.json();
      
      document.getElementById('stats').innerHTML = `
        <div class="stat-card">
          <h3>–õ–æ–≥–∏–Ω–æ–≤: ${stats.logins}</h3>
        </div>
        <div class="stat-card">
          <h3>–°–æ–∑–¥–∞–Ω–æ –¥–∞–Ω–Ω—ã—Ö: ${stats.dataCreated}</h3>
        </div>
        <div class="stat-card">
          <h3>–û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–∞–Ω–Ω—ã—Ö: ${stats.dataUpdated}</h3>
        </div>
      `;
    }
    
    loadStats();
    setInterval(loadStats, 5000); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
  </script>
</body>
</html>
```

---

## üìä Timeline —Å–≤–æ–¥–∫–∞

| –§–∞–∑–∞ | –ù–µ–¥–µ–ª–∏ | –ó–∞–¥–∞—á–∏ |
|------|--------|--------|
| **1. Backend Event System** | 1-5 | Event Bus, Plugin Registry, Upload .zip |
| **2. Frontend –†–∞—Å—à–∏—Ä–µ–Ω–∏—è** | 6-9 | –ú–µ–Ω–µ–¥–∂–µ—Ä, –ü–ª–∞–≥–∏–Ω—ã, –í–∏–¥–∂–µ—Ç—ã |
| **3. Frontend –ú–µ–Ω—é** | 10-12 | –í—ã–±–æ—Ä –ø–ª–∞–≥–∏–Ω–∞, –ê–≤—Ç–æ–ø—É—Ç–∏, Drag&Drop |
| **4. Frontend –ü—Ä–æ—Ñ–∏–ª—å** | 13-15 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞–º–∏, –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ |
| **5. Backend –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | 16-18 | –•—É–∫–∏ –≤ –∫–æ–¥, –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ |
| **6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 19-20 | Guide, –ü—Ä–∏–º–µ—Ä—ã, API Reference |

**–û–±—â–µ–µ –≤—Ä–µ–º—è: 16-20 –Ω–µ–¥–µ–ª—å (~4-5 –º–µ—Å—è—Ü–µ–≤)**

---

## üéØ MVP (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ - 10-12 –Ω–µ–¥–µ–ª—å)

### MVP Scope:
- ‚úÖ –§–∞–∑–∞ 1: Event System + Upload (–Ω–µ–¥–µ–ª–∏ 1-5)
- ‚úÖ –§–∞–∑–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏—è UI (–Ω–µ–¥–µ–ª–∏ 6-9)
- ‚ùå –§–∞–∑–∞ 3: –ú–µ–Ω—é - –£–ü–†–û–©–ï–ù–ù–ê–Ø (–±–µ–∑ drag&drop –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)
- ‚ùå –§–∞–∑–∞ 4: –í–∏–¥–∂–µ—Ç—ã - –û–¢–õ–û–ñ–ò–¢–¨
- ‚úÖ –§–∞–∑–∞ 5: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–Ω–µ–¥–µ–ª–∏ 10-12)
- ‚ùå –§–∞–∑–∞ 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø–æ–ª—É—á–∞–µ–º:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–ø–ª–∞–≥–∏–Ω—ã + –≤–∏–¥–∂–µ—Ç—ã)
- ‚úÖ Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (50+ —Å–æ–±—ã—Ç–∏–π)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ .zip —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ –ü–ª–∞–≥–∏–Ω—ã —Å UI –≤ –º–µ–Ω—é
- ‚úÖ –í–∏–¥–∂–µ—Ç—ã –≤ –ø—Ä–æ—Ñ–∏–ª–µ (iframe –∫–∞—Ä—Ç–æ—á–∫–∏)
- ‚úÖ –ê–≤—Ç–æ–ø—É—Ç–∏ –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
- ‚úÖ –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (1 —É—Ä–æ–≤–µ–Ω—å)
- ‚úÖ Drag & Drop (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π + –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π)
- ‚úÖ API –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 –Ω–æ—è–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

