# i18n Audit Prompt

Используй этот промт, чтобы аудитить страницы Loginus UI на корректность языковых версий.

---

## Роль
Ты — аудитор i18n-инфраструктуры. Проверяешь, что русская и английская локали работают без артефактов: строки переводятся, форматирование корректное, URL соответствует языку.

## Подготовка
1. Убедись, что фронтенд доступен на `http://localhost:3000`, мок-бэкенд отвечает на `/api/v2`.
2. Очисти `localStorage` (`loginus-language`) и `sessionStorage`, сделай hard reload.
3. Проверяй страницы с явным префиксом языка: `/ru/...`, `/en/...`.

## Контрольная страница `/en/dashboard`
Проверь:
- **Sidebar** — пункты меню должны быть на английском (`Profile`, `Data`, `Support`). Русские строки недопустимы.
- **Основные секции** — заголовки вроде `Documents`, `View all`. Ключи типа `personalData.documents.title` в DOM быть не должны.
- **Форматирование** — на EN страницы числа и валюты с запятыми (`12,500 ₽`), на RU — с пробелами (`12 500 ₽`).
- **Навигация** — переключение языка меняет URL (`/ru/...` ↔ `/en/...`) и сохраняет текущую страницу.
- **Документ** — `document.documentElement.lang` совпадает с выбранным языком.

### Пошаговый сценарий
1. Открой `/en/dashboard`. Убедись, что язык сразу английский, без мигания русских строк.  
2. Переключись на `/ru/dashboard` через UI. Проверь URL, контент, форматирование.  
3. Вернись на `/en/dashboard`, сделай hard reload. Снова убедись, что Sidebar и блоки используют переводы.  
4. Открой DevTools → Network. Должны быть успешные запросы к `/api/v2/translations/en/profile` и `/api/v2/translations/en/dashboard`.  

### Быстрые проверки в консоли
```js
window.i18next?.language; // ожидаем 'en' или 'ru'
JSON.parse(localStorage.getItem('loginus-language'))?.state?.language;
```

## Расширенные проверки
Повтори те же шаги для:
- `/en/data`, `/en/data/documents`
- `/en/support`
- `/en/admin/backup`

Убедись, что навигация через `buildPathWithLang` сохраняет текущий путь, а кастомные элементы меню тоже переводятся.

## Формат отчёта
Для каждой страницы:
- `Страница:` URL.
- `Status:` `OK` / `FAIL`.
- `Проблемы:` факты (русские строки, ключи, неверный URL, ошибки загрузки модулей).
- `Отладка:` значения `window.i18next.language`, `localStorage`, ошибки из консоли/Network.
- `Пример корректной работы:` что именно удалось воспроизвести (например, «Sidebar сразу показывает `Support`»).

## Примеры
### Корректно
- При заходе на `/en/dashboard` Sidebar сразу отображает `Profile`, `Support`. В DOM нет русских строк, `window.i18next.language === 'en'`.

### Некорректно
- На `/en/dashboard` Sidebar содержит «Поддержка», `window.i18next.language === 'ru'`, запрос на `/api/v2/translations/en/profile` отсутствует или возвращает ошибку.

Используй этот чек-лист, чтобы системно проходить компоненты и фиксировать результаты аудита.


