import React from 'react';
import { useTranslation } from 'react-i18next';
import { DataSection } from '../../design-system/composites';
import { themeClasses } from '../../design-system/utils/themeClasses';
import { isHorizontalLogo } from '../../utils/authMethodIcons';

export interface ExternalAccount {
  id: string;
  name: string;
  connected: boolean;
  email?: string;
  icon: React.ReactNode;
}

export interface ExternalAccountsSectionProps {
  accounts?: ExternalAccount[];
  onConnect?: (providerId: string) => void;
  onDisconnect?: (providerId: string) => void;
}

/**
 * ExternalAccountsSection - секция связанных аккаунтов
 * Отображает все доступные социальные сети с возможностью подключения/отключения
 */
export const ExternalAccountsSection: React.FC<ExternalAccountsSectionProps> = ({
  accounts = [],
  onConnect,
  onDisconnect,
}) => {
  const { t } = useTranslation();

  // Список всех доступных провайдеров (из SocialAuthButtons)
  const allProviders = [
    {
      id: 'github',
      name: 'Github',
      icon: (
        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
      ),
    },
    {
      id: 'telegram',
      name: 'Telegram',
      icon: (
        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
          <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.139-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
        </svg>
      ),
    },
    {
      id: 'gosuslugi',
      name: 'Government Services',
      icon: (
        <svg viewBox="0 0 90 90" fill="none" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
          <defs>
            <linearGradient x1="50.006%" y1="-.009%" x2="50.006%" y2="100.17%" id="gosuslugi-gradient">
              <stop stopColor="#1466AC" offset="40%"/>
              <stop stopColor="#EF4058" offset="66%"/>
            </linearGradient>
          </defs>
          <g fill="none" fillRule="evenodd">
            <path d="M72.872 45.829h-2.72a.183.183 0 0 0-.17.17v8.63c-.594.17-1.19.255-1.869.255-1.785 0-2.21-.552-2.21-2.933v-5.952a.183.183 0 0 0-.17-.17h-2.718a.183.183 0 0 0-.17.17v6.25c0 3.91 1.317 5.399 4.673 5.399 1.912 0 4.079-.51 5.354-.978.042-.043.084-.085.084-.128V46c.085-.085 0-.17-.084-.17Zm-57.613.043h-2.762c-.085 0-.127.042-.127.127-.425 1.7-1.317 4.591-2.507 7.61l-2.761-7.652c-.043-.043-.085-.085-.128-.085H4.17c-.043 0-.085.042-.128.085-.042.042-.042.085 0 .127l4.164 11.394a36.97 36.97 0 0 1-1.19 2.295c-.297.51-.552 1.02-.807 1.573-.042.043-.042.085 0 .128.043.042.085.085.128.085h3.016c.043 0 .128-.043.128-.085a55.123 55.123 0 0 0 1.742-3.741c1.784-4.167 3.186-8.078 4.249-11.649 0-.042 0-.085-.043-.127-.085-.085-.127-.085-.17-.085Zm9.9 8.757a.091.091 0 0 0-.085-.085h-.128c-.68.255-1.912.425-2.762.425-1.911 0-2.804-.51-2.804-3.4 0-2.339.298-3.402 2.804-3.402.723 0 1.36.085 2.21.34.085 0 .127 0 .17-.085l1.104-2.21v-.128a.091.091 0 0 0-.085-.085 12.812 12.812 0 0 0-3.611-.553c-3.951 0-5.736 1.871-5.736 6.08 0 4.251 1.785 6.164 5.736 6.164.977 0 2.974-.212 3.909-.595.085-.043.127-.128.085-.213l-.807-2.253Zm25.874-8.757h-2.761c-.085 0-.128.042-.128.127-.425 1.743-1.317 4.591-2.507 7.61l-2.761-7.652c-.043-.043-.085-.085-.128-.085h-2.804c-.042 0-.085.042-.127.085-.043.042-.043.085 0 .127l4.163 11.394a36.97 36.97 0 0 1-1.19 2.295c-.297.51-.552 1.02-.807 1.573-.042.043-.042.085 0 .128.043.042.085.085.128.085h3.016c.043 0 .128-.043.128-.085a55.123 55.123 0 0 0 1.742-3.741c1.742-4.167 3.186-8.078 4.249-11.649 0-.042 0-.085-.043-.127-.085-.085-.127-.085-.17-.085Zm10.197-.043H53.2a.183.183 0 0 0-.17.17V57.18c0 .085.085.17.17.17h2.72c.084 0 .17-.085.17-.17v-8.673h4.205c.043 0 .128-.042.128-.085.34-.765.637-1.573.977-2.38v-.128c-.085-.042-.127-.085-.17-.085Z" fill="#EF3E58" fillRule="nonzero"/>
            <path d="M18.488 28.654c-3.909 0-5.438 1.7-5.438 5.994 0 4.379 1.53 6.08 5.438 6.08 3.951 0 5.48-1.701 5.48-6.08 0-4.294-1.529-5.994-5.48-5.994Zm0 9.608c-1.784 0-2.337-.468-2.337-3.529 0-3.23.595-3.528 2.337-3.528 1.785 0 2.38.297 2.38 3.528 0 3.019-.553 3.529-2.38 3.529Zm16.358-.468a.091.091 0 0 0-.085-.085h-.128c-.68.255-1.912.425-2.761.425-1.912 0-2.805-.51-2.805-3.4 0-2.34.255-3.402 2.805-3.402.722 0 1.36.085 2.209.34.085 0 .127 0 .17-.085l1.104-2.21v-.128a.091.091 0 0 0-.085-.085 12.812 12.812 0 0 0-3.61-.553c-3.952 0-5.737 1.87-5.737 6.08 0 4.25 1.785 6.164 5.736 6.164.977 0 2.974-.213 3.909-.595.085-.043.127-.128.085-.213l-.807-2.253Zm-30.676-8.8a.183.183 0 0 0-.17.17v11.18c0 .086.085.17.17.17h2.72c.084 0 .17-.084.17-.17v-8.672h4.205c.043 0 .128-.042.128-.085.34-.765.637-1.573.977-2.38v-.128c-.043-.043-.085-.085-.128-.085H4.17Z" fill="#0F67B1" fillRule="nonzero"/>
            <path d="M81.575 56.16v-.17c0-.085 0-.213.043-.298.127-1.573.212-3.486.297-5.697v-.17L82 45.064c0-1.658-.042-3.274-.085-4.762v-.17l-.297-5.696c0-.086 0-.213-.043-.298v-.17c0-.17-.042-.298-.042-.468v-.17c-.128-1.658-.213-2.678-.255-2.763 0-.17-.043-.34-.043-.468v-.127a6.023 6.023 0 0 0-.17-.85c0-.043 0-.086-.042-.128-.722-3.444-2.634-7.227-5.014-10.076-.934-1.105-1.912-2.083-2.931-2.848a135.271 135.271 0 0 0-11.94-7.865c-6.245-3.699-11.853-6.25-12.575-6.59-.043 0-.043-.042-.043-.042C46.863.85 44.866.34 42.7.128c-.425-.043-.85-.085-1.275-.085-.383 0-.765-.043-1.147-.043h-.595c-2.932.043-5.608.595-7.733 1.573-.34.128-5.99 2.72-12.406 6.462l-.255.127A154.73 154.73 0 0 0 7.35 16.07c-1.614 1.19-3.059 2.72-4.376 4.676-.297.468-.297 1.573.977 1.573h3.272c1.402 0 1.742-.85 3.314-1.998 1.742-1.275 5.183-3.826 11.471-7.567 4.546-2.678 8.795-4.762 10.834-5.74.043 0 .085-.042.128-.042 0 0 .042 0 .042-.042 0 0 .043 0 .043-.043.042 0 .085-.042.085-.042.042 0 .085-.043.127-.043.51-.255.85-.383.85-.383 1.445-.637 3.484-1.062 5.65-1.105h.85c.638 0 1.275.043 1.87.128 1.317.17 2.507.425 3.484.85.085.042.212.085.297.127a143.63 143.63 0 0 1 12.152 6.377 137.128 137.128 0 0 1 11.471 7.568c.807.595 1.615 1.445 2.38 2.38 1.911 2.466 3.483 5.825 3.738 8.418 0 .043.128 1.063.255 2.806 0 .127 0 .212.043.34v.255c0 .17.042.298.042.468v.17c0 .085 0 .212.043.297 0 .213.042.425.042.638 0 .128 0 .255.043.383v.085c0 .17 0 .297.042.467v.34c.287 5.07.287 10.15 0 15.22v.34c0 .17 0 .298-.042.468v.085c0 .127 0 .255-.043.382 0 .213-.042.426-.042.638 0 .128 0 .213-.043.298v.17c0 .17-.042.297-.042.467v.256c0 .127 0 .255-.043.34-.127 1.743-.255 2.805-.255 2.805-.255 2.594-1.827 5.952-3.739 8.418-.764.978-1.572 1.786-2.379 2.38-.042 0-1.147.851-2.974 2.126a136.965 136.965 0 0 1-20.479 11.734l-.17.085c-.085.043-.212.085-.297.128-.977.382-2.167.68-3.484.85-.595.085-1.232.127-1.87.127h-.85c-2.166-.042-4.205-.425-5.65-1.105 0 0-.297-.127-.85-.383-.042-.042-.127-.042-.17-.085-.042-.042-.085-.042-.127-.085-.043 0-.043-.042-.085-.042-.043 0-.085-.043-.127-.043-.043-.042-.085-.042-.17-.085h-.043a138.21 138.21 0 0 1-10.58-5.611c-6.33-3.699-9.729-6.292-11.47-7.568-1.573-1.148-1.913-1.998-3.315-1.998H3.951c-1.274 0-1.274 1.106-.977 1.53C4.291 71.21 5.736 72.74 7.35 73.93c.213.17 5.396 3.996 11.94 7.865.339.213.679.425 1.061.595 6.076 3.486 11.302 5.867 11.6 6.037 2.081.935 4.8 1.488 7.69 1.573h.594c.383 0 .765 0 1.147-.043.425 0 .85-.042 1.275-.085 2.167-.212 4.206-.722 5.82-1.445 0 0 .043 0 .043-.042.722-.34 6.33-2.934 12.576-6.59a156.319 156.319 0 0 0 8.795-5.612l3.144-2.253c1.02-.765 1.997-1.743 2.932-2.848 2.38-2.849 4.291-6.632 5.013-10.076 0-.042 0-.085.043-.127.042-.298.127-.596.17-.85V59.9c.042-.17.042-.34.042-.468 0-.085.128-1.105.255-2.763v-.17c.085-.043.085-.213.085-.34" fill="url(#gosuslugi-gradient)" transform="translate(4)"/>
            <path d="M37.65 45.829h-8.328c-.085 0-.127.043-.17.128-.212 3.783-.934 7.822-1.954 11.138 0 .042 0 .085.042.127.043.043.085.043.128.043h2.847c.084 0 .127-.043.127-.085.807-2.55 1.445-5.867 1.7-8.673h2.719v8.63c0 .085.085.17.17.17h2.719c.085 0 .17-.085.17-.17v-11.18c0-.043-.085-.128-.17-.128Z" fill="#EF3E58" fillRule="nonzero"/>
          </g>
        </svg>
      ),
    },
    {
      id: 'tinkoff',
      name: 'Tinkoff id',
      icon: (
        <svg viewBox="0 0 59 32" fill="none" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" className="w-full h-full">
          <path d="M43.0569 0H15.9431C7.13797 0 0 7.16344 0 16C0 24.8366 7.13797 32 15.9431 32H43.0569C51.862 32 59 24.8366 59 16C59 7.16344 51.862 0 43.0569 0Z" fill="#303030"/>
          <path d="M9.24921 8.22632H26.4249V16.8951C26.4249 19.1176 25.2424 21.1716 23.3259 22.2829L17.837 25.4633L12.3481 22.2829C10.4292 21.1716 9.24921 19.1176 9.24921 16.8951V8.22632Z" fill="#FFDD2D"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M13.9615 12.7896V15.4847C14.3298 15.0674 14.9961 14.7858 15.7602 14.7858H16.5894V17.9209C16.5894 18.7556 16.364 19.4847 16.0283 19.887H19.6383C19.3051 19.4847 19.0796 18.7556 19.0796 17.9234V14.7883H19.9088C20.6729 14.7883 21.3418 15.0699 21.7076 15.4872V12.7921H13.959L13.9615 12.7896Z" fill="#333333"/>
          <path d="M36.2302 21.4356V11.2483H33.0286V21.4356H36.2302Z" fill="white"/>
          <path d="M43.9462 21.4356C47.9972 21.4356 50.0013 19.2734 50.0013 16.3419C50.0013 13.4105 47.9946 11.2483 44.287 11.2483H38.5726V21.4356H43.9487H43.9462ZM43.6231 13.687C45.8201 13.687 46.737 14.6726 46.737 16.3419C46.737 17.8831 45.8226 19.0597 43.6231 19.0597H41.6615V13.687H43.6231Z" fill="white"/>
        </svg>
      ),
    },
    {
      id: 'yandex',
      name: 'Yandex id',
      icon: (
        <svg viewBox="0 0 127 30" fill="currentColor" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
          <path d="M11.2029 6.57616H9.45694C6.28514 6.57616 4.61486 8.18389 4.61486 10.5627C4.61486 13.2617 5.77009 14.5115 8.15039 16.1192L10.1044 17.4359L4.45481 25.8747H0.25L5.31469 18.3249C2.39023 16.2385 0.754868 14.219 0.754868 10.7766C0.754868 6.46995 3.74188 3.55859 9.4162 3.55859H15.0643V25.8761H11.1898V6.57616H11.2029ZM31.0353 9.72614V25.8761H27.2204V19.1368H22.115V25.8761H18.3001V9.72614H22.115V16.1192H27.2204V9.72614H31.0353ZM48.2751 29.5586H44.7395V25.863H36.1655V29.5586H32.63V22.8527H33.8259C35.1688 20.1538 35.4351 15.0498 35.4351 11.1025V9.72032H46.5728V22.8527H48.2751V29.5586ZM42.7579 12.7437H38.7175V13.2224C38.7175 16.013 38.4265 20.4128 37.3615 22.8585H42.7579V12.7437ZM56.8476 26.1817C51.9706 26.1817 49.2048 23.4565 49.2048 17.8346C49.2048 12.9561 51.425 9.39586 56.078 9.39586C59.8928 9.39586 62.3648 11.5215 62.3648 17.1318V19.1513H53.1535C53.3121 21.8503 54.3757 23.1655 57.1677 23.1655C59.0286 23.1655 61.0219 22.4613 62.2048 21.6509V24.7733C61.0888 25.5444 59.2934 26.1817 56.8476 26.1817ZM53.1535 16.3316H58.483V16.0144C58.483 13.995 57.901 12.4265 56.0096 12.4265C54.1894 12.4105 53.2597 13.7665 53.1535 16.3316ZM68.7579 17.9408V25.8761H64.9299V9.72614H68.7579V17.1697L74.1616 9.72614H78.0172L72.6208 17.1697L78.7476 25.863H74.4075L68.7579 17.9408ZM78.5279 17.8084C78.5279 12.8892 81.0668 9.39441 85.9481 9.39441C87.8396 9.39441 89.2581 9.71304 90.0555 10.1641V13.4086C89.2843 12.9299 87.8352 12.4105 86.3599 12.4105C83.8603 12.4105 82.4781 14.2059 82.4781 17.7153C82.4781 21.0515 83.6086 23.1772 86.3337 23.1772C87.9414 23.1772 89.0981 22.7654 90.0555 22.0874V25.1981C89.1243 25.8761 87.873 26.1947 86.1067 26.1947C80.9998 26.1817 78.5264 23.2048 78.5264 17.8084H78.5279Z" fill="currentColor"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M111.75 29.9995C123.753 29.9995 126.75 27.0028 126.75 14.9995C126.75 2.99623 123.753 -0.000488281 111.75 -0.000488281C99.7467 -0.000488281 96.75 2.99623 96.75 14.9995C96.75 27.0028 99.7467 29.9995 111.75 29.9995ZM106.629 5.99942V23.9994H103.5V5.99942H106.629ZM113.665 5.99942C114.852 5.99942 115.953 6.1505 116.967 6.47424C117.982 6.7764 118.845 7.29438 119.579 7.98503C120.313 8.67568 120.896 9.60374 121.306 10.726C121.737 11.8483 121.932 13.2512 121.932 14.9131C121.932 16.3807 121.716 17.6757 121.306 18.8196C120.874 19.9419 120.291 20.8915 119.536 21.6685C118.78 22.4455 117.874 23.0282 116.838 23.4167C115.802 23.8052 114.637 24.021 113.406 24.021H109.457V5.99942H113.665ZM113.147 21.5606C113.989 21.5606 114.766 21.4095 115.457 21.1289C116.147 20.8483 116.73 20.4167 117.226 19.8771C117.723 19.316 118.09 18.6253 118.37 17.7836C118.629 16.9419 118.78 15.9706 118.78 14.8483C118.78 13.6397 118.651 12.6253 118.392 11.8052C118.133 10.985 117.766 10.316 117.291 9.81956C116.816 9.32316 116.255 8.95625 115.586 8.74043C114.939 8.5246 114.205 8.41669 113.406 8.41669H112.586V21.539H113.147V21.5606Z" fill="currentColor"/>
        </svg>
      ),
    },
    {
      id: 'saber',
      name: 'Saber id',
      icon: (
        <svg width="105" height="22" viewBox="0 0 105 22" fill="currentColor" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" className="w-5 h-5">
          <path fillRule="evenodd" clipRule="evenodd" d="m15.769 4.017 2.135-1.577a10.95 10.95 0 0 0-6.9-2.44h-.005a10.97 10.97 0 0 0-7.378 2.844v-.001a10.97 10.97 0 0 0-3.608 7.61l-.002.045c-.007.164-.011.33-.011.494v.01a10.97 10.97 0 0 0 2.907 7.448 10.969 10.969 0 0 0 7.544 3.536 10.963 10.963 0 0 0 7.928-2.83A10.97 10.97 0 0 0 22 10.999a11.06 11.06 0 0 0-.173-1.971l-2.367 1.745v.226a8.436 8.436 0 0 1-2.483 5.98h-.001a8.514 8.514 0 0 1-.287.274l-.017.015A8.433 8.433 0 0 1 11 19.46v-.002a8.435 8.435 0 0 1-5.98-2.48l.001-.001a8.31 8.31 0 0 1-.288-.302l-.003-.003a8.43 8.43 0 0 1-2.18-6.064l.002-.031H2.55a8.437 8.437 0 0 1 2.472-5.558l.002.002a8.429 8.429 0 0 1 5.969-2.48h.014c.139 0 .277.005.414.012V2.55a8.416 8.416 0 0 1 4.347 1.466Zm5.253 2.445a11.034 11.034 0 0 0-1.318-2.188l-8.702 6.416-4.188-2.625v3.158l4.188 2.625 10.02-7.386Zm66.163 11.165h2.357V4.43h-2.357v13.198Zm13.358-3.318c-.792.767-2.011 1.15-3.658 1.15h-2.13V6.598h2.15c1.67 0 2.893.364 3.666 1.093.773.73 1.16 1.829 1.16 3.3 0 1.445-.396 2.551-1.188 3.318Zm1.867-8.24c-1.195-1.093-3.017-1.64-5.468-1.64h-4.544v13.198h4.487c1.069 0 2.052-.132 2.951-.396s1.672-.672 2.319-1.225 1.15-1.264 1.509-2.13c.358-.868.537-1.905.537-3.112 0-2.036-.597-3.6-1.791-4.694Zm-38.512.557 2.983-2.198h-9.982v13.201h9.982v-2.198h-7.133v-3.38h6.084V9.854h-6.084V6.626h4.15Zm-18 8.805h2.97c1.759 0 2.65-.585 2.65-1.83 0-1.217-.842-1.83-2.65-1.83h-2.97v3.66Zm0-5.857h3.466c3.148 0 4.882 1.388 4.882 3.908 0 2.636-1.913 4.147-5.25 4.147H43.05V4.428h11.365L51.43 6.626h-5.533v2.948Zm29.01 2.118h-2.526V6.626h2.525c1.825 0 2.83.9 2.83 2.533s-1.005 2.533-2.83 2.533Zm.06-7.264h-5.434v13.201h2.848v-3.74h2.586c3.468 0 5.623-1.823 5.623-4.737s-2.155-4.724-5.623-4.724ZM35.7 15.387c.879 0 1.73-.213 2.46-.616l.631-.346 1.843 1.36c-1.215 1.302-3.008 2.018-5.062 2.018-1.963 0-3.753-.693-5.04-1.952-1.285-1.255-1.992-2.994-1.992-4.895 0-1.894.71-3.607 1.998-4.825 1.281-1.21 3.075-1.877 5.052-1.877 1.823 0 3.417.554 4.61 1.602l.135.119L38.29 7.48c-.748-.537-1.619-.81-2.59-.81-2.569 0-4.433 1.833-4.433 4.358 0 2.526 1.864 4.359 4.432 4.359Z" fill="currentColor"/>
        </svg>
      ),
    },
  ];

  // Объединяем все провайдеры с данными о подключенных аккаунтах
  const providersWithStatus = allProviders.map(provider => {
    const connectedAccount = accounts.find(acc => acc.id === provider.id);
    return {
      ...provider,
      connected: connectedAccount?.connected || false,
      email: connectedAccount?.email,
    };
  });

  const handleProviderClick = (providerId: string, connected: boolean) => {
    if (connected) {
      onDisconnect?.(providerId);
    } else {
      onConnect?.(providerId);
    }
  };

  return (
    <DataSection
      id="external-accounts"
      title={t('data.externalAccounts.title', 'Connected Accounts')}
      description={t('data.externalAccounts.description', 'Help to log in to Loginus faster and fill in data')}
    >
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {providersWithStatus.map((provider) => {
          return (
            <div
              key={provider.id}
              className={`w-full flex items-center gap-4 p-3 rounded-lg text-left transition-colors duration-200 ${themeClasses.border.default} ${
                provider.connected
                  ? 'border-success/30 dark:border-success/30 bg-success/5 dark:bg-success/10 hover:bg-success/10 dark:hover:bg-success/20 hover:border-success/50 dark:hover:border-success/50'
                  : `${themeClasses.background.cardHoverSemiTransparent} hover:border-primary/30 dark:hover:border-primary/30`
              }`}
            >
              {/* Иконка провайдера */}
              <div className={`rounded-lg flex items-center justify-center flex-shrink-0 ${
                provider.connected
                  ? 'bg-success/20 dark:bg-success/20'
                  : themeClasses.background.gray2
              } ${
                // Горизонтальные логотипы требуют большего размера
                isHorizontalLogo(provider.id)
                  ? 'w-16 h-8 p-1'
                  : 'w-10 h-10'
              }`}>
                <div className={`${themeClasses.text.secondary} ${
                  isHorizontalLogo(provider.id)
                    ? 'w-full h-full'
                    : ''
                }`}>
                  {provider.icon}
                </div>
              </div>
              
              {/* Информация */}
              <div className="flex-1 min-w-0">
                <div className={`text-sm font-medium ${themeClasses.text.primary}`}>
                  {provider.id === 'gosuslugi' 
                    ? t('data.externalAccounts.government', provider.name)
                    : t(`data.externalAccounts.${provider.id}`, provider.name)}
                </div>
                {provider.connected ? (
                  provider.email ? (
                    <div className={`text-xs ${themeClasses.text.secondary} mt-1 truncate`}>
                      {provider.email}
                    </div>
                  ) : (
                    <div className="text-xs text-success mt-1">
                      {t('common.connected', 'Connected')}
                    </div>
                  )
                ) : (
                  <div className={`text-xs ${themeClasses.text.secondary} opacity-60 mt-1`}>
                    {t('data.externalAccounts.notConnected', 'Not connected')}
                  </div>
                )}
              </div>
              
              {/* Тумблер переключения */}
              <button
                onClick={(e) => {
                  e.stopPropagation();
                  handleProviderClick(provider.id, provider.connected);
                }}
                className={`flex-shrink-0 w-12 h-6 rounded-full transition-colors duration-200 ${
                  provider.connected
                    ? 'bg-primary'
                    : themeClasses.background.gray2
                }`}
                aria-label={provider.connected ? t('common.disable', 'Отключить') : t('common.enable', 'Включить')}
              >
                <span
                  className={`block w-5 h-5 rounded-full ${themeClasses.background.surface} transition-transform duration-200 ${
                    provider.connected ? 'translate-x-6' : 'translate-x-0.5'
                  }`}
                />
              </button>
            </div>
          );
        })}
      </div>
    </DataSection>
  );
};

