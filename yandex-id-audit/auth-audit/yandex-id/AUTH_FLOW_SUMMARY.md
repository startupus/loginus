# Яндекс ID - Полный флоу авторизации

## Собранные экраны

### 1. Список аккаунтов
**Файл:** `01-auth-list.png` / `01-auth-list.md`  
**URL:** `https://passport.yandex.ru/auth/list`  
**Описание:** Экран выбора аккаунта из списка ранее использованных. Показывает карточки аккаунтов с аватарами, email, именами и подключёнными сервисами (Плюс, Карты, Семья, Организации).

### 2. Ввод телефона
**Файл:** `02-add-account.png` / `02-add-account.md`  
**URL:** `https://passport.yandex.ru/auth/add`  
**Описание:** Универсальное поле ввода телефона для входа или регистрации. Есть альтернативные методы: биометрия, QR-код, ссылка "Ещё".

### 3. Нет аккаунта
**Файл:** `03-no-account.png` / `03-no-account.md`  
**URL:** `https://passport.yandex.ru/auth/reg/portal`  
**Описание:** Экран когда номер не найден в системе. Предлагает создать новый аккаунт или изменить номер. Есть иллюстрация (летающая тарелка).

### 4. Подтверждение звонком
**Файл:** `04-phone-code.png` / `04-phone-code.md`  
**URL:** `https://passport.yandex.ru/auth/reg/portal`  
**Описание:** Экран ввода последних 6 цифр входящего звонка. Система звонит автоматически, пользователь не отвечает. Таймер для повторного запроса.

### 5. Конфликт номеров
**Файл:** `05-existing-account.png` / `05-existing-account.md`  
**URL:** `https://passport.yandex.ru/auth/reg/portal`  
**Описание:** Экран когда номер уже зарегистрирован. Предлагает войти в существующий аккаунт, изменить номер или написать в поддержку.

### 6. Подтверждение через Telegram
**Файл:** `06-telegram-code.png` / `06-telegram-code.md`  
**URL:** `https://passport.yandex.ru/auth/reg`  
**Описание:** Альтернативный метод подтверждения через Telegram. Код приходит в чат "Verification Codes". Есть обработка ошибок.

### 7. Ввод имени и фамилии
**Файл:** `07-name-surname.png` / `07-name-surname.md`  
**URL:** `https://passport.yandex.ru/auth/reg`  
**Описание:** Экран восстановления доступа через ввод имени и фамилии. Используется для подтверждения личности. Есть ссылка "Не помню" для альтернативного пути.

### 8. Биометрическая авторизация
**Файл:** `08-biometric.png` / `08-biometric.md`  
**URL:** `https://passport.yandex.ru/auth/webauthn-auth`  
**Описание:** Экран входа по лицу или отпечатку. Использует WebAuthn API. Системный промпт браузера/ОС для биометрии. Минималистичный UI с инструкцией.

## Ключевые паттерны

### 1. Универсальное поле ввода
- Один инпут для телефона вместо табов (телефон/email)
- Автоматическое определение типа ввода
- Поддержка и входа, и регистрации

### 2. Множественные методы подтверждения
- **SMS** — стандартный метод
- **Звонок** — последние 6 цифр входящего номера
- **Telegram** — код в специальном чате
- **Биометрия** — лицо/отпечаток (WebAuthn API)
- **QR-код** — быстрый вход
- **Имя/Фамилия** — для восстановления доступа

### 3. Обработка конфликтов
- Номер не найден → предложение создать аккаунт
- Номер уже зарегистрирован → предложение войти или изменить
- Неправильный код → понятное сообщение об ошибке

### 4. UX принципы
- **Progressive Disclosure** — код вводится по одной цифре
- **Visual Feedback** — таймеры, состояния кнопок
- **Clear Messaging** — понятные инструкции
- **Alternative Paths** — несколько способов подтверждения
- **Error Prevention** — кнопки активны только при правильном вводе

### 5. Дизайн
- Минималистичный интерфейс
- Фоновое изображение (горный пейзаж)
- Чёткая визуальная иерархия
- Адаптивная вёрстка

## Альтернативные методы входа

### Меню "Ещё"
При клике на "Ещё" открывается выпадающее меню:
- **Создать ID для себя**
- **Создать ID для ребёнка**
- **Войти по логину**

### Биометрия
- Использует WebAuthn API
- Системный промпт браузера/ОС
- Поддерживает Face ID, Touch ID, Windows Hello и др.

### QR-код
- Быстрый вход через сканирование
- Используется мобильное приложение

## Технические детали

### WebAuthn API (Биометрия)
- Используется стандарт Web Authentication API
- Системный промпт браузера/ОС для биометрии
- Поддерживает Face ID, Touch ID, Windows Hello, Android Biometric
- Локальная проверка на устройстве пользователя
- Challenge-response механизм для безопасности

### Маскировка контактов
- Телефоны: `+7 995 ***-**-44` (показываются последние 4 цифры)
- Email: частично скрывается домен
- Используется для безопасности при отображении контакта

### Обработка ошибок
- **Неправильный код:** "Неправильный код, попробуйте ещё раз"
- **Код истёк:** Таймер показывает время до истечения
- **Слишком много попыток:** Блокировка на время
- **Номер не найден:** Предложение создать аккаунт
- **Номер уже зарегистрирован:** Предложение войти или изменить

### Таймеры и ограничения
- Повторная отправка кода: блокировка на 60 секунд
- Время жизни кода: 5 минут
- Максимум попыток ввода кода: 5
- Rate limiting: 3 запроса кода в минуту

## Структура компонентов

На основе анализа всех экранов выявлены общие компоненты:

### Базовые (Primitives)
- **Button** - используется на всех 8 экранах (5 вариантов: primary, secondary, outline, text, ghost)
- **Input** - используется на 6 экранах
- **Text** - используется на всех 8 экранах
- **Link** - используется на 7 экранах
- **Icon** - используется на всех 8 экранах

### Составные (Composites)
- **PageHeader** - header с кнопкой "Назад" и логотипом (8/8)
- **PageContent** - обёртка для контента с заголовком (8/8)
- **PageFooter** - footer с текстом и ссылками (7/8)
- **CodeInput** - grid input для ввода кода (2/8)
- **ErrorMessage** - отображение ошибок (4/8)
- **ResendTimer** - таймер для повторной отправки (2/8)

### Layouts
- **AuthPageLayout** - единый layout для всех страниц авторизации

Подробнее см. [REUSABLE_COMPONENTS.md](../loginus-design/REUSABLE_COMPONENTS.md)

## Рекомендации для Loginus

1. **Универсальное поле** — один инпут для телефона/email, автоматическое определение
2. **Автоматическая регистрация** — если аккаунта нет, создаём автоматически
3. **Множественные методы** — SMS, Telegram, биометрия (WebAuthn)
4. **Обработка ошибок** — понятные сообщения с возможностью повтора
5. **Минималистичный дизайн** — только необходимое, без лишнего
6. **Progressive Onboarding** — сбор дополнительных данных после регистрации
7. **Переиспользуемые компоненты** — единая архитектура для всех страниц
8. **Безопасность** — rate limiting, таймеры, маскировка контактов

## Связанные документы

- **Детальные описания экранов:** `01-auth-list.md` - `08-biometric.md`
- **Техническое задание:** [LOGINUS_AUTH_SPEC.md](../loginus-design/LOGINUS_AUTH_SPEC.md)
- **Архитектура компонентов:** [REUSABLE_COMPONENTS.md](../loginus-design/REUSABLE_COMPONENTS.md)
- **Краткая сводка:** [COMPONENTS_SUMMARY.md](../loginus-design/COMPONENTS_SUMMARY.md)

